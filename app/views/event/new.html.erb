<%= link_to "Back to Teacher Portal", teacher_path(current_user), class: "btn btn-success pull-right" %>
<%= link_to "Review an Event", event_index_path(current_user), class: "btn btn-info pull-right" %>
<!-- link_to "Student Data", student_survey_index_path(current_user), class: "btn btn-warning pull-right"  -->
<h1>Create Event</h1>
<div id="event-creation-form">


  <div class="event-data col-md-6">
    <%= form_tag "/event", method: "post" do %>
      <%= label :teacher_name, "Teacher Name:" %>
      <%= select_tag :teacher_id, options_for_select(@teachers) %>
      <br>
      <%= label :school, "School:"  %>
      <%= select_tag :school, options_for_select(@schools) %>
      <br>

      <%= label :provider_id, "Provider:" %>
      <%= select_tag :provider_id, options_for_select(@providers) %>
      <br>
      <%= label :pathway, "Pathway:" %>
      <%= select_tag :pathway, options_for_select(@pathways)%>
      <br>
      <%= label :activity, "Activity:" %>
      <%= select_tag :activity, options_for_select(@activities) %>
      <br>
      <%= label :location, "Location:"  %>
      <%= text_field_tag :location, current_user.school %>
      <br>
      <%= radio_button_tag :grade, "9", current_user.grade == 9 %>
      <%= label :grade_9, "9th grade"%> &emsp;
      <%= radio_button_tag :grade, "10", current_user.grade == 10 %>
      <%= label :grade_10, "10th grade" %> &emsp;
      <%= radio_button_tag :grade, "11", current_user.grade == 11 %>
      <%= label :grade_11, "11th grade" %> &emsp;
      <%= radio_button_tag :grade, "12", current_user.grade == 12 %>
      <%= label :grade_12, "12th grade" %>
      <br>

      <div class="bg-info pre-scrollable" id="suggested-students">
        <p>Select students for this event.</p>
        <div id="visible-student-button">
          <%= button_tag "add all #{current_user.grade}th graders from #{current_user.school}", type: "button", id: "add-visible", class: "btn-xs btn-warning" %>
        </div>
        <table class="table table-striped build-table">
          <thead>
            <tr class="text-center">
              <th></th>
              <th>Name</th>
              <th>
                <%= label :select_by_grade, "Select by grade" %>
                <%= select_tag :select_by_grade, options_for_select(@grades), id: "select_by_grade" %>
              </th>
              <th>
                <%= label :select_by_school, "Select by school" %>
                <%= select_tag :select_by_school, options_for_select(@schools+["All"], id: "select_by_school") %>
              </th>
            </tr>
          </thead>
          <tbody id="filtered-students"></tbody>
          <% @students.each do |student| %>
            <tr class="unselected-student">
              <th> <input type="checkbox" name="slected" class="check-box"> </th>
              <th> <%= student.name %> </th>
              <th> <%= student.grade %> </th>
              <th> <%= student.school %> </th>
              <input type="hidden" value=<%= student.id %> name="students[]">
            </tr>
          <% end %>
        </table>
      </div>

      <%= label :date, "Date:", class: "create-date" %>
      <%= date_field :date, value: Time.now.strftime('%Y-%m-%d') %>
      <br>
      <%= label :start_time, "Start time:" %>
      <%= time_select :start_time, {ampm: true, default: {hour: "16", minute: "30"}} %>
      <br>
      <%= label :end_time, "End time:" %>
      <%= time_select :end_time, {ampm: true, default: {hour: "17", minute: "30"}} %>
      <br>
      <%= submit_tag "Create event" %>
    <% end %>
  </div>
</div>
